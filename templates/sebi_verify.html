<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SEBI Investor Verification</title>
    <!-- CSS is the same as before -->
    <style>body{font-family:Arial,sans-serif;margin:40px;background-color:#f0f4f8}.container{max-width:800px;margin:auto;background:white;padding:20px;border-radius:8px;box-shadow:0 0 10px rgba(0,0,0,0.1);text-align:center}h1{color:#003366}p{color:#555}input{width:90%;padding:12px;font-size:16px;border-radius:4px;border:1px solid #ccc;margin-top:20px}button{background-color:#005a9c;color:white;padding:12px 20px;border:none;border-radius:4px;cursor:pointer;margin-top:20px;font-size:16px}#result{margin-top:30px;padding:20px;border-radius:8px}.success{background-color:#dff0d8;border:1px solid #d6e9c6;color:#3c763d}.error{background-color:#f2dede;border:1px solid #ebccd1;color:#a94442}.details{text-align:left;margin:20px auto;max-width:90%}</style>
</head>
<body>
    <div class="container">
        <h1>SEBI-Chain Verification Portal</h1>
        <p>Enter your Transaction ID (TxID) provided by your broker to verify your account registration.</p>
        <div class="form-group">
            <input type="text" id="txidInput" placeholder="Paste your TxID here...">
        </div>
        <button onclick="verifyTxID()">Verify Registration</button>
        <div id="result" style="display:none;"></div>
    </div>

    <script>
        async function verifyTxID() {
            const txid = document.getElementById('txidInput').value.trim();
            const resultDiv = document.getElementById('result');
            if (!txid) {
                alert('Please enter a Transaction ID.');
                return;
            }

            const response = await fetch(`/api/verify_txid/${txid}`);
            const result = await response.json();
            
            let message = '';
            if (result.status === 'success') {
                message = `
                    <h2>✅ Verification Successful</h2>
                    <div class="details">
                       <strong>Status:</strong> A legitimate account was registered.<br>
                       <strong>Broker Name:</strong> ${result.details.brokerName}<br>
                       <strong>Broker Website:</strong> ${result.details.brokerWebsite}<br>
                       <strong>Registration Timestamp:</strong> ${new Date(result.details.timestamp).toLocaleString()}<br>
                    </div>
                `;
                showResult(true, message);
            } else {
                message = `<h2>❌ Verification Failed</h2><p>${result.message}</p>`;
                showResult(false, message);
            }
        }

        function showResult(isSuccess, message) {
            const resultDiv = document.getElementById('result');
            resultDiv.style.display = 'block';
            resultDiv.className = isSuccess ? 'success' : 'error';
            resultDiv.innerHTML = message;
        }
    </script>
</body>
</html>